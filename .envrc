#!/usr/bin/env bash
set -euo pipefail

# PROJECT_ROOT="$(git rev-parse --show-toplevel 2>/dev/null || pwd)"
# export PROJECT_ROOT

export PROJECT_ROOT="${PROJECT_ROOT:-$(git rev-parse --show-toplevel 2>/dev/null || pwd)}"

# ------------------------------------------------------------
# Pass Credentials
# ------------------------------------------------------------

if ! command -v pass >/dev/null 2>&1; then
    echo "pass command not found. Please run 'make install-tools' for tooling setup."
    exit 1
else
    export VAULT_ADDR="${VAULT_ADDR:-$(pass vault/dev/address)}"
    export VAULT_TOKEN="${VAULT_TOKEN:-$(pass vault/dev/token)}"
fi
